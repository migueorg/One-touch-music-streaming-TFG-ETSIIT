\chapter{Introducción}

Este proyecto es software libre, y está liberado con la licencia \cite{gplv3}.\\

Puede encontrarse en el siguiente repositorio:
\url{https://github.com/migueorg/One-touch-music-streaming-TFG-ETSIIT/}, en el
cual se ha desarrollado desde el principio en abierto.

\section{Descripción del Problema}
En los tiempos en los que estamos, cada vez es más normal escuchar música o
podcasts de fondo mientras hacemos otras tareas de nuestro día a día. Escuchamos
contenido mientras trabajamos, vamos en el coche, de camino al trabajo, de
vuelta a casa, mientras cocinamos, limpiamos, hay quienes también escuchan algún
tipo de podcast, ruido blanco o sonido para irse a dormir, entre muchos otros
más escenarios. 

A su vez, en el contexto informático en el que estamos,
también le hemos dado la espalda a los cables siempre que nos sea posible. Los
auriculares inalámbricos son un obligatorio en el día a día de muchas personas,
facilitando así la integración de la música en cada vez más contextos diferentes
de nuestra vida. Sin embargo, aún teniendo en cuenta los avances en el campo del
\emph{IoT}, no es tan fácil mantener esa sensación de integración y continuidad
respecto a la escucha de música.\\

Por ejemplo si llegamos a casa del trabajo, y hemos vuelto escuchando un podcast
en nuestros auriculares inalámbricos mientras andábamos, al llegar a casa y
ponernos a preparar la comida nos gustaría poder seguir escuchando el podcast
por el mismo minuto en el que íbamos pero en los altavoces de casa. 

Para hacer esto, actualmente podríamos conectar el móvil al altavoz usando el
\emph{jack} de 3.5, sin embargo, los móviles actualmente carecen de dicho puerto
(salvo pocas excepciones). 

Otra opción sería emplear un asistente virtual (\emph{Alexa, Google Assistant,
Siri}) y pedirle que reproduzca el podcast que estábamos escuchando, el problema
de esto es que tendremos que recordar el nombre concreto del podcast, tenemos
que ponernos a hablarle al asistente lo cual rompe la sensación de integración y
continuidad, y a todo esto el asistente tiene que ser capaz de entendernos
correctamente, lo cual no pasa siempre. 

Otra opción más, la cual es compatible con la mayoría de altavoces con
asistentes integrados, sería la de tener el altavoz en red y mandar el podcast
desde el móvil a través de protocolos como \emph{Google Cast, AirPlay o Spotify
Connect}, lo cual es una de las opciones más rápidas y sencillas, pero implica
tener que estar navegando a través de aplicaciones e interfaces hasta llegar a
la opción de enviar contenido. Y en el caso de que tengamos muchos altavoces en
red, tendremos que elegir de entre una lista amplia de dispositivos, al cual
queremos enviar dicho contenido. De nuevo, este último caso, aún siendo el más
factible, rompe mucho con la sensación de integración y continuidad de la que
hablé anteriormente. 

Sin embargo, \emph{Apple} sí que tiene una solución para esto integrada en su
ecosistema. Para los usuarios que tengan un \emph{iPhone} y un \emph{HomePod},
permiten que la reproducción del \emph{iPhone} continúe en el \emph{HomePod}
simplemente con acercar el \emph{iPhone} al \emph{HomePod}, sin la necesidad de
navegar por interfaces ni seleccionar nada. Todo de forma transparente para el
usuario y en cuestión de segundos. El problema de esto es que fuera de ese
ecosistema cerrado de \emph{Apple}, no hay ninguna opción más. Si un usuario
quiere disfrutar de esa transparencia y simplicidad, y no tiene \emph{iPhone},
bien por el precio del mismo o bien porque prefiere tener un sistema más abierto
como es \emph{Android}, no le será posible disfrutar de esa opción que mantenga
la sensación de integración y continuidad. A su vez, esta opción limita la
posibilidad de escucha a únicamente el altavoz del \emph{HomePod} o de los
dispositivos \emph{HomePods} que haya emparejados en casa. Por lo que en caso de
tener un equipo propio de alta fidelidad o ajeno al ecosistema de \emph{Apple},
tampoco se podrá usar.\\

\section{Motivación}
Por tanto, una vez puestos en contexto, la motivación de este proyecto es la de
poder brindar dicha sensación de continuidad al sistema operativo \emph{Android}
con un coste notablemente más bajo que el de la solución de \emph{Apple}. Y es
que esa sensación de la que tanto hincapié se ha hecho a lo largo de la
descripción, no es más que una manera de decir facilidad de utilización,
simpleza, accesibilidad y funcionamiento automático e independiente. Los cuales
van a ser parte de los objetivos principales que guíen este proyecto (más
adelante se hablará más en concreto de los objetivos). Por otro lado, además de
poder solucionar dicho problema en el ecosistema de \emph{Android}, con este
proyecto también se va a buscar la posibilidad de emplear altavoces que no sean
\emph{HomePod}. 

\section{Objetivos}
\begin{itemize}
    \item Se deberá poder transmitir o mandar el sonido que se esté
    reproduciendo en el dispositivo Android hasta el dispositivo que haga de
    altavoz o receptor.
    \item La comunicación entre ambos dispositivos (Android y altavoz) deberá de
    llevarse a cabo en menos de 3 segundos para poder mantener la sensación de
    continuidad de la que hemos hablado antes. Más de 3 segundos puede hacer
    creer al usuario que el servicio no está funcionando.
    \item Facilidad de uso y sencillez a la hora de compartir el contenido del
    reproductor al altavoz. El proceso de envío de sonido desde el Android hasta
    el altavoz ha de poder realizarse sin interactuar con menús. (Se entiende
    que el proceso de montaje de la Raspberry Pi con su módulo NFC queda
    excluido de este objetivo, aun así se procurará facilitar el proceso de
    instalación lo más posible, ofreciendo opciones en Docker para desplegar
    todo, o incluso una imagen en formato ISO con el sistema operativo
    configurado lista para instalar en la tarjeta SD e insertar en la Raspberry
    Pi)
    \item El coste final del producto debe estar por debajo de los 349€, el cual
    es el precio del HomePod a secas.
\end{itemize}

\section{Personajes}
Los personajes que tienen el problema presentado anteriormente y que, por tanto,
son los que usarán la aplicación para solventarlo son:
\begin{itemize}
    \item Pepe, 32 años, es un contable al que le gusta la domótica y el
    \emph{DIY}, tiene su casa llena de automatizaciones, pero encuentra los
    altavoces inteligentes muy poco interesantes, no los considera inteligentes
    porque siempre tiene que decirle lo que quiere hacer de forma muy mascada
    para que le consigan entender correctamente. 
    \item María, 55 años, es audiofila desde pequeña y siempre le ha gustado
    escuchar música para evadirse del mundo y sus problemas. Tras llevar media
    vida en el mundo del audio, tiene muchos equipos que, a pesar de funcionar
    como el primer día, no puede usarlos con plataformas actuales. Le gustaría
    darles una segunda vida simplificando su funcionamiento e interacción con
    ellos lo más posible. 
    \item El Piso de Olga es un grupo de jóvenes de entre 20 y 25 años que están
    acostumbrados a usar la tecnología, pero quieren unificar el control y la
    interacción de la reproducción de música para todos los integrantes del
    grupo en un mismo dispositivo de forma simple y sin tener que prestarse los
    móviles.
\end{itemize}

\section{User Journeys}
Los contextos en los que los personajes citados arriba usarán la aplicación son
los siguientes:\\

\begin{itemize}
    \item Pepe, vive a 20 minutos andando del trabajo, por lo que va a
    pie para ahorrar gasolina y mantenerse activo. Al salir del trabajo siempre
    se pone un podcast que dura 30 minutos para hacer su trayecto más ameno, el
    cual lo va escuchando en sus auriculares inalámbricos. Cuando llega a casa
    se prepara algo de comer mientras escucha los últimos minutos de su podcast.
    Para ello solo tendrá que acercar su Android hasta el altavoz en el que
    desea escucharlo.
    \item María dedica la tarde de los domingos a escuchar música en su casa
    usando su equipo convencional que tiene desde hace 20 años, cuando
    fabricaban cosas de calidad, debido a la antigüedad este carece de conexión
    a internet. Así que para poder disfrutar de música actual sin tener que
    conectar el móvil al equipo de música a través de un cable, tiene conectado
    su antiguo ordenador con un módulo lector NFC, así solo tiene que acercar el
    móvil con la canción que desea a dicho lector para empezar a disfrutar de su
    equipo \emph{vintage}.
    \item En el piso de Olga organizan fiestas esporádicamente, por lo que la
    música es un tema principal que se usará durante toda la noche hasta que
    acabe el evento. A lo largo de la fiesta cada asistente va a querer poner
    canciones que le interesen, para ello simplemente tendrá que acercar su
    Android con la canción deseada para que esta se añada a la cola del altavoz.
\end{itemize}


\section{Historias de Usuario}
A partir de los personajes y los user story presentados anteriormente, podemos
extraer ciertas funcionalidades del proyecto que el público destino espera
obtener o poder hacer. Estas funcionalidades clave tienen forma de las
siguientes historias de usuario:

\begin{enumerate}
    \item HU0: Como programador quiero saber detalladamente que problema tengo
    que solventar para empezar a programar.
    \item HU1: Como usuario con pocos recursos económicos (Víctor) quiero poder
    ejecutar el reproductor en un teléfono Android para poder usar la aplicación
    en un móvil barato.
    \item HU2: Como usuario amante de la música y con equipo de audio propio
    (María) quiero utilizar mi propio equipo de altavoces sin tener que utilizar
    un altavoz comercial de alguna otra marca para escuchar el contenido que
    envío desde el móvil.
    \item HU3: Como usuario con experiencias nefastas en otros sistemas
    domóticos, quiero enviar el contenido de la manera más sencilla posible para
    no tener que andar pulsando botones ni buscando menús de compartir.
    \item HU4: Como grupo de usuarios que empleará la aplicación con diferentes
    móviles en un solo altavoz (Piso Olga) queremos poder acceder todos al mismo
    catálogo de audio para no tener que andar pasando ficheros al altavoz.
    \item HU5: Como persona ajena al proyecto quiero conocer las decisiones que
    se han tomado al desarrollar el proyecto para poder entender por qué se han
    empleado ciertas plataformas y componentes y poder continuar o modificar su
    desarrollo si fuese necesario.
\end{enumerate}

Nótese que además de las funcionalidades que el usuario final espera obtener,
también se ha dedicado una Historia de Usuario (HU0) para el papel del
programador, en este caso yo, con lo que esperaría tener a la hora de empezar un
proyecto. Así como otra Historia de Usuario (HU5) que personifica al tribunal o
a cualquier persona que en el futuro encuentre este proyecto y quiera conocer
por qué se ha actuado de la forma que se ha hecho durante todo el trabajo.

\section{Milestones}
Los productos mínimamente viables o releases que se irán haciendo durante el
desarrollo se han estimado que serán los siguientes:

\begin{enumerate}
    \item M0: Repositorio y documentación funcional sobre la que empezar a programar.
    \item M1: Reproductor de música local para Android.
    \item M2: Reproductor de música para el altavoz (Raspberry Pi) basado en Linux.
    \item M3: Comunicación NFC entre Android y Raspberry Pi.
    \item M4: Biblioteca de música remota para el reproductor de Android.
    \item M5: Documentación.
    \item M6: Presentación.
\end{enumerate}